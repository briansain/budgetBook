<div class="chartContainer">
  <ngx-charts-pie-chart *ngIf="finishedCalculatingChart"
    [results]="chartData"
    labels="true"
    legend="true"
    legendPosition="bottom"
    (select)="logCategory($event)"
  ></ngx-charts-pie-chart>
</div>

<button mat-button (click)="clearFilter()">Clear Filter</button>
<div class="tableContainer">
  <table mat-table [dataSource]="dataSource" class="transactionTable">
    <ng-container matColumnDef="postedDate">
      <th mat-header-cell *matHeaderCellDef> Posted Date </th>
      <!--watch for updates on this: https://github.com/angular/components/issues/5982-->
      <!--could refactor to this: https://netbasal.com/keeping-it-simple-implementing-edit-in-place-in-angular-4fd92c4dfc70-->
      <td mat-cell *matCellDef="let transaction" (click)="transaction.isEditing = !transaction.isEditing">
        <span *ngIf="!transaction.isEditing">{{transaction.postedDate | date}}</span>
        <span *ngIf="transaction.isEditing">Editing!!</span>
      </td>
    </ng-container>
    <ng-container matColumnDef="description">
      <th mat-header-cell *matHeaderCellDef> Description </th>
      <td mat-cell *matCellDef="let transaction" (click)="transaction.isEditing = !transaction.isEditing">
        <span *ngIf="!transaction.isEditing">{{transaction.description}}</span>
        <span *ngIf="transaction.isEditing">Editing!!</span>
      </td>
    </ng-container>
    <ng-container matColumnDef="debit">
      <th mat-header-cell *matHeaderCellDef> Debit </th>
      <td mat-cell *matCellDef="let transaction" (click)="transaction.isEditing = !transaction.isEditing">
        <span *ngIf="!transaction.isEditing">{{transaction.debit}}</span>
        <span *ngIf="transaction.isEditing">Editing!!</span>
      </td>
    </ng-container>
    <ng-container matColumnDef="budgetCategory">
      <th mat-header-cell *matHeaderCellDef> Budget Category </th>
      <td mat-cell *matCellDef="let transaction" (click)="transaction.isEditing = !transaction.isEditing">
        <span *ngIf="!transaction.isEditing">{{transaction.budgetCategory}}</span>
        <span *ngIf="transaction.isEditing">Editing!!</span>
      </td>
    </ng-container>
    <ng-container matColumnDef="rowActions">
      <th mat-header-cell *matHeaderCellDef> Save/Cancel </th>
      <td mat-cell *matCellDef="let transaction">
        <button mat-icon-button color="primary" *ngIf="transaction.isEditing">
          <mat-icon>done</mat-icon>
        </button>
        <button mat-icon-button color="accent" *ngIf="transaction.isEditing">
          <mat-icon>clear</mat-icon>
        </button>
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="columnsToDisplay; sticky:true"></tr>
    <tr mat-row *matRowDef="let row; columns: columnsToDisplay"></tr>
  </table>
</div>


<pre>
  {{transactions | json}}
</pre>